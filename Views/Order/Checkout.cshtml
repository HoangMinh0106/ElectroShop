@model WebBanHang.Models.CheckoutViewModel

@{
    ViewData["Title"] = "Xác nhận Thanh toán";
}

<h2>Xác nhận Thanh toán</h2>

<div class="row">
    <div class="col-md-7">
        <h4>Thông tin giao hàng</h4>
        <div class="mb-2">
            <strong>Tên khách hàng:</strong> @Model.CustomerName
        </div>
        <div class="mb-2">
            <strong>Số điện thoại:</strong> @Model.Phone
        </div>
        <div class="mb-3">
            <strong>Địa chỉ giao hàng:</strong> @Model.Address
        </div>

        <hr />

        <h4>Giỏ hàng của bạn</h4>
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Sản phẩm</th>
                    <th>Giá</th>
                    <th>Số lượng</th>
                    <th>Thành tiền</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.CartItems)
                {
                    <tr>
                        <td>@item.ProductName</td>
                        <td>@((item.Price ?? 0).ToString("N0")) ₫</td>
                        <td>@item.Quantity</td>
                        <td>@((item.Quantity * (item.Price ?? 0)).ToString("N0")) ₫</td>
                    </tr>
                }
                <tr class="fw-bold">
                    <td colspan="3" class="text-end">Tổng cộng:</td>
                    <td>@(Model.CartItems.Sum(i => i.Quantity * (i.Price ?? 0)).ToString("N0")) ₫</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="col-md-5">
        <h4>Chọn phương thức thanh toán</h4>
        <form asp-action="Checkout" method="post" class="p-3 border rounded">
            
            @* Hidden fields to post customer data back to the controller *@
            <input type="hidden" asp-for="CustomerName" />
            <input type="hidden" asp-for="Phone" />
            <input type="hidden" asp-for="Address" />

            <div class="form-check mb-3">
                <input class="form-check-input" type="radio" name="PaymentMethod" id="cod" value="COD" checked>
                <label class="form-check-label" for="cod">
                    Thanh toán khi nhận hàng (COD)
                </label>
            </div>
            <div class="form-check mb-3">
                <input class="form-check-input" type="radio" name="PaymentMethod" id="vnpay" value="VNPAY">
                <label class="form-check-label" for="vnpay">
                    Thanh toán qua VNPAY
                    <img src="~/Image/vnpay.png" style="height: 25px; margin-left: 10px;" />
                </label>
            </div>
            
            <hr/>

            <button type="submit" class="btn btn-success w-100">Xác nhận và Đặt hàng</button>
        </form>
    </div>
</div>